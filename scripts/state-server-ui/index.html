<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agentic DeltaPorts</title>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  
  <!-- Highlight.js for code/diff -->
  <link href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" rel="stylesheet">
  
  <!-- App CSS -->
  <link href="/assets/app.css" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#/overview">
        <i class="bi bi-cpu me-2"></i>Agentic DeltaPorts
      </a>
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav nav-pills me-auto" id="main-nav">
          <li class="nav-item">
            <a class="nav-link" href="#/overview" data-route="overview">
              <i class="bi bi-speedometer2 me-1"></i>Overview
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#/events" data-route="events">
              <i class="bi bi-activity me-1"></i>Events
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#/jobs" data-route="jobs">
              <i class="bi bi-list-task me-1"></i>Jobs
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#/runs" data-route="runs">
              <i class="bi bi-play-circle me-1"></i>Runs
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#/ports" data-route="ports">
              <i class="bi bi-box-seam me-1"></i>Ports
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#/bundles" data-route="bundles">
              <i class="bi bi-archive me-1"></i>Bundles
            </a>
          </li>
        </ul>
        
        <!-- Status indicators -->
        <div class="d-flex align-items-center gap-3">
          <!-- SSE Status -->
          <span id="sse-status" class="badge rounded-pill text-bg-secondary">
            <span class="spinner-border spinner-border-sm me-1" role="status" style="display:none;"></span>
            <span class="status-text">Connecting...</span>
          </span>
          
          <!-- Last Event ID -->
          <small class="text-body-secondary d-none d-md-inline">
            Last: <span id="last-event-id">-</span>
          </small>
          
          <!-- Pause Toggle -->
          <div class="form-check form-switch mb-0 d-none d-md-block">
            <input class="form-check-input" type="checkbox" role="switch" id="pause-stream">
            <label class="form-check-label small" for="pause-stream">Pause</label>
          </div>
          
          <!-- Theme Toggle -->
          <div class="dropdown">
            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" 
                    data-bs-toggle="dropdown" aria-expanded="false" id="theme-toggle">
              <i class="bi bi-circle-half"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><button class="dropdown-item" data-theme="light"><i class="bi bi-sun me-2"></i>Light</button></li>
              <li><button class="dropdown-item" data-theme="dark"><i class="bi bi-moon me-2"></i>Dark</button></li>
              <li><button class="dropdown-item" data-theme="auto"><i class="bi bi-circle-half me-2"></i>Auto</button></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Main Content -->
  <main class="container-fluid py-3">
    <div class="row g-3">
      <!-- Primary Content -->
      <div class="col-lg-7" id="main-content">
        <!-- Route content rendered here -->
        <div class="d-flex justify-content-center align-items-center" style="min-height: 200px;">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
      
      <!-- Detail Panel (desktop) -->
      <div class="col-lg-5 d-none d-lg-block" id="detail-panel">
        <div class="card shadow-sm sticky-top" style="top: 80px;">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span id="detail-title">Details</span>
            <button type="button" class="btn-close btn-sm" id="close-detail" style="display:none;"></button>
          </div>
          <div class="card-body" id="detail-content">
            <p class="text-body-secondary mb-0">Select an item to view details</p>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Detail Offcanvas (mobile) -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="detail-offcanvas">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvas-title">Details</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body" id="offcanvas-content">
      <p class="text-body-secondary">Select an item to view details</p>
    </div>
  </div>
  
  <!-- Toast Container -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toast-container">
  </div>
  
  <!-- Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/diff.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/bash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/makefile.min.js"></script>
  
  <!-- App JS -->
  <script src="/assets/app.js"></script>
</body>
</html>
