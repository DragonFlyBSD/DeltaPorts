--- CMakeLists.txt.orig	2021-03-29 15:28:56 UTC
+++ CMakeLists.txt
@@ -69,7 +69,7 @@ if(NOT MSVC)
 	elseif(CMAKE_SYSTEM_NAME STREQUAL "Linux")
 		set(FIDO_CFLAGS "${FIDO_CFLAGS} -D_GNU_SOURCE")
 		set(FIDO_CFLAGS "${FIDO_CFLAGS} -D_DEFAULT_SOURCE")
-	elseif(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
+	elseif(CMAKE_SYSTEM_NAME MATCHES "FreeBSD|DragonFly")
 		set(FIDO_CFLAGS "${FIDO_CFLAGS} -D__BSD_VISIBLE=1")
 	endif()
 	set(FIDO_CFLAGS "${FIDO_CFLAGS} -std=c99")
